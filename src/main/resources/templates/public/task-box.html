<!DOCTYPE html>
<html lang="de">
<body>
<div class="col-12">
    <div class="m-3 p-3 border rounded-3 d-flex flex-row">
        <div class="flex-grow-1 d-flex flex-column me-5">
            <div class="d-block text-muted small mb-2">Aufgabe [[ ${taskStat.count} ]]</div>
            <div class="d-block h6 h-2-5rem overflow-hidden">[[ ${task.title} ]]</div>
            <div class="d-flex flex-column flex-md-row" th:if="${null != userTasks.get(task.id)}">
                <div class="me-5">Fach: <span class="fw-bold">[[${userTasks.get(task.id).subject.name}]]</span></div>
                <div class="me-5">Lehrkraft: <span class="fw-bold">[[${userTasks.get(task.id).teacher.fullname}]]</span></div>
                <div class="me-5">Datum: <span class="fw-bold">[[${#temporals.format(userTasks.get(task.id).date, 'dd.MM.yyyy')}]]</span></div>
            </div>
        </div>
        <div class="d-flex flex-column justify-content-between">
            <div class="text-end">
                <div class="h5">
                    <span class="badge bg-secondary" th:if="${null == userTasks.get(task.id) || userTasks.get(task.id).status.toString() == 'OPEN'}">
                        <i class="bi bi-emoji-neutral"></i>
                        [[${T(de.digidoc.model.TaskStatus).OPEN.displayValue}]]
                    </span>
                    <span class="badge bg-warning" th:if="${null != userTasks.get(task.id) && userTasks.get(task.id).status.toString() == 'TRANSMITTED'}">
                        <i class="bi bi-emoji-smile"></i>
                        [[${T(de.digidoc.model.TaskStatus).TRANSMITTED.displayValue}]]
                    </span>
                    <span class="badge bg-danger" th:if="${null != userTasks.get(task.id) && userTasks.get(task.id).status.toString() == 'REJECTED'}">
                        <i class="bi bi-emoji-frown"></i>
                        [[${T(de.digidoc.model.TaskStatus).REJECTED.displayValue}]]
                    </span>
                    <span class="badge bg-success" th:if="${null != userTasks.get(task.id) && userTasks.get(task.id).status.toString() == 'DONE'}">
                        <i class="bi bi-emoji-laughing"></i>
                        [[${T(de.digidoc.model.TaskStatus).DONE.displayValue}]]
                    </span>
                </div>
            </div>
            <div class="text-end">
                <a th:href="@{'/public/course/' + ${course.id} + '/task/' + ${task.id}}" class="btn btn-primary" th:if="${null == userTasks.get(task.id) || userTasks.get(task.id).status.toString() == 'OPEN'}" >
                    <i class="bi bi-pencil-fill"></i>
                    Aufgabe abgeben
                </a>
                <a th:href="@{'/public/course/' + ${course.id} + '/task/' + ${task.id}}" class="btn btn-outline-primary" th:unless="${null == userTasks.get(task.id) || userTasks.get(task.id).status.toString() == 'OPEN'}">
                    <i class="bi bi-eye-fill"></i>
                    Details ansehen
                </a>
            </div>
        </div>
    </div>
</div>
</body>
</html>