<!DOCTYPE html>
<html lang="de">
<body>
<div th:each="module: ${modules}">
    <div th:classappend="${outerloop ? 'page-break-before' : ''}"></div>
    <div class="text-center my-4">
        <div th:if="${module.icon}" class="large-icon mb-4">
            <i th:class="${module.icon}"></i>
        </div>
        <h6 class="text-muted">[[${module.title}]]</h6>
        <h3 class="text-uppercase" th:if="${!#strings.isEmpty(module.subTitle)}">[[${module.subTitle}]]</h3>
    </div>
    <hr class="border border-2"/>
    <div th:if="${#lists.size(module.tasks)} > 0" th:each="task:${module.tasks}" class="avoid-break w-100">
        <div class="border border-2 rounded-3 p-3 mb-3 bg-white mx-3">
            <h5>[[${task.title}]]</h5>
            <div class="fw-bold mt-3 mb-2">Wann und wie habe ich das gelernt oder geÃ¼bt?</div>
            <div class="row">
                <div class="col-3 fst-italic">Fach & Datum:</div>
                <div class="col-9">
                    <span th:if="${null != userTaskMap.get(task.id) and userTaskMap.get(task.id).status.toString == 'DONE'}">
                        am [[ ${#temporals.format(userTaskMap.get(task.id).date, 'dd.MM.yyyy')} ]] in
                        [[${userTaskMap.get(task.id).subject.name}]]
                        (bei [[${userTaskMap.get(task.id).teacher.firstname}]]
                        [[${userTaskMap.get(task.id).teacher.lastname}]])
                    </span>
                </div>
            </div>
            <div class="row">
                <div class="col-3 fst-italic">Lernaufgabe / Projekt:</div>
                <div class="col-9">
                    <span th:if="${null != userTaskMap.get(task.id) and userTaskMap.get(task.id).status.toString == 'DONE'}">
                        [[${userTaskMap.get(task.id).solution}]]
                    </span>
                </div>
            </div>
            <div class="row print-on-demand mt-2" th:if="${null != userTaskMap.get(task.id) and null != userTaskMap.get(task.id).file and userTaskMap.get(task.id).file.type.startsWith('image/')}">
                <img th:src="@{'/public/file/' + ${userTaskMap.get(task.id).file.id}}" />
            </div>
        </div>
    </div>
    <div th:if="${#lists.size(module.modules) > 0}"
         th:replace="certificate/modules(modules=${module.modules},outerloop=false)"></div>
</div>
</body>